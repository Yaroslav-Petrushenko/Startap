let parallaxStartPos;const parallaxBG=document.querySelectorAll(".parallax");function moveBackground(e){let t=e.pageY-window.pageYOffset-e.target.getBoundingClientRect().top+1,n=50+e.pageX/window.innerWidth*15,i=50+t/window.innerHeight*20;e.target.style.backgroundPosition=`${n}% ${i}%`}parallaxBG.forEach((e=>{e.style.backgroundPosition="center",e.style.backgroundSize="120% auto",e.addEventListener("mousemove",(function(e){moveBackground(e)}))}));let interval,menu=document.querySelectorAll(".top-menu a");function scrollToBlock(e){let t,n,i=document.querySelector(e).getBoundingClientRect().top+window.pageYOffset,o=window.pageYOffset,l=1;t=i>o?"down":"up",clearInterval(interval),interval=setInterval((()=>{n=Math.abs(i-window.pageYOffset),l<=45&&n>.25*window.innerHeight?l*=1.3:n<.25*window.innerHeight&&l>3&&(l*=.7),"down"==t?window.scrollTo(0,window.pageYOffset+l):window.scrollTo(0,window.pageYOffset-l),Math.abs(window.pageYOffset-i)<=3?(window.scrollTo(0,i),clearInterval(interval),console.log(l)):Math.abs(window.pageYOffset+window.innerHeight-document.body.getBoundingClientRect().height)<5&&clearInterval(interval)}),20)}menu.forEach((e=>{e.onclick=function(e){e.preventDefault(),scrollToBlock(this.getAttribute("href"))}}));let firstVisit,lastVisit,timeInSite,firstTimeInSite,hamburger=document.querySelector(".hamburger"),nmenu=document.querySelector(".navmenu");hamburger.onclick=function(){nmenu.classList.toggle("active-burger")},window.onload=function(){localStorage.firstVisit&&"undefined"!=localStorage.firstVisit||(localStorage.firstVisit=new Date),firstVisit=localStorage.firstVisit,localStorage.lastVisit||(localStorage.lastVisit=firstVisit),timeInSite=(new Date-new Date(localStorage.lastVisit))/1e3/60,timeInSite>5?console.log("Welcome to STARTUP"):timeInSite>1440?console.log("Тебе не було цілий день"):timeInSite>2880&&(console.log("де тебе носило так довго"),window.onblur=function(){localStorage.lastVisit=new Date},lastVisit=localStorage.lastVisit)};let svgfigur=document.querySelector(".sv svg"),trople=document.querySelectorAll(".personal h3");svgfigur.addEventListener("click",(function(e){3===e.detail&&trople.forEach((e=>{e.innerHTML="New text triple click"}))}));const animItems=document.querySelectorAll("._anim-start");if(animItems.length>0){function animOnScroll(){animItems.forEach((e=>{const t=e,n=t.offsetHeight,i=offset(t).top;let o=window.innerHeight-n/4;n>window.innerHeight&&(o=window.innerHeight-window.innerHeight/4),window.pageYOffset>i-o&&window.pageYOffset<i+n?t.classList.add("_active-anim"):t.classList.contains("_anim-no")||t.classList.remove("_active-anim")}))}function offset(e){const t=e.getBoundingClientRect();let n=window.pageXOffset||document.documentElement.scrollLeft,i=window.pageYOffset||document.documentElement.scrollTop;return{top:t.top+i,left:t.left+n}}window.addEventListener("scroll",animOnScroll),setTimeout((()=>{animOnScroll()}),200)}let positionCards=0,cards=document.querySelectorAll(".ap"),slider=document.querySelector(".slider-card"),sliderWidth=slider.getBoundingClientRect().width,widthCards=cards[0].getBoundingClientRect().width,btnLeft=document.querySelector(".left"),btnRight=document.querySelector(".right"),cardsCount=Math.floor(sliderWidth/widthCards),distanceCards=(sliderWidth-widthCards*cardsCount)/(cardsCount-1);if(cards.length>cardsCount){positionCards-=distanceCards+widthCards;let e=cards[cards.length-1].cloneNode(!0);slider.insertAdjacentElement("afterbegin",e)}function infinitySlider(){let e=cards[0].getBoundingClientRect().height;function t(){positionCards=0,cards.length>cardsCount?(positionCards-=distanceCards+widthCards,btnLeft.style.display="block",btnRight.style.display="block"):(btnLeft.style.display="none",btnRight.style.display="none"),cards=document.querySelectorAll(".ap"),cards.forEach((e=>{e.style.left=positionCards+"px",positionCards+=distanceCards+widthCards}))}function n(e){if("left"==e){cards[cards.length-1].remove();let e=cards[cards.length-2].cloneNode(!0);slider.insertAdjacentElement("afterbegin",e)}else if("right"==e){cards[0].remove();let e=cards[1].cloneNode(!0);slider.insertAdjacentElement("beforeend",e)}t()}cards=document.querySelectorAll(".ap"),widthCards=cards[0].getBoundingClientRect().width,sliderWidth=slider.getBoundingClientRect().width,cardsCount=Math.floor(sliderWidth/widthCards),distanceCards=(sliderWidth-widthCards*cardsCount)/(cardsCount-1),slider.style.height=e+"px",cards.length>cardsCount&&(positionCards-=distanceCards+widthCards),t(),btnLeft.onclick=function(){n("left")},btnRight.onclick=function(){n("right")}}window.onresize=infinitySlider,infinitySlider();
